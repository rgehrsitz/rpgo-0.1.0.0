# **Comprehensive FERS Retirement Planning Tool – Research & Requirements**

## Overview of the Planning Model

To help **Robert and Dawn** make informed retirement decisions, the tool must model all major income streams and expenses under the Federal Employees Retirement System (FERS). FERS retirees have three core income sources – a FERS pension (Basic Benefit), Social Security, and Thrift Savings Plan (TSP) withdrawals. Our goal is to compare their **current net take-home pay** (while working) against **future net retirement income** in various scenarios. The model should project cash flows for **25+ years** (user-adjustable horizon) with a focus on the immediate and near-term impact after retirement. Key features will include flexible scenario inputs (retirement dates, Social Security start ages, TSP withdrawal strategies, etc.), accurate tax calculations (federal, Pennsylvania state, and local), cost-of-living adjustments (COLAs) and inflation assumptions, and clear output comparisons (potentially with visualizations). Below we detail the required inputs, calculations, and functionalities to ensure the tool provides an **accurate** and **holistic** picture of Robert and Dawn’s retirement finances.

## Data Inputs and Scenario Configuration

**Flexible Input Format:** The input data will be provided in a structured JSON or YAML format, making it easy to define multiple scenarios and personal details. Each scenario should capture all relevant parameters for both Robert and Dawn. We recommend structuring inputs per person (since each has separate benefits) and per scenario. For example:

* **Personal Profile Data (for each of Robert and Dawn):**

  * Birth date (for calculating retirement eligibility, Social Security, etc.)
  * Hire date and/or total **years of federal service** (to compute pension)
  * High-3 average salary (highest 3-year avg pay) for pension calculations
  * Current salary and contributions (to calculate current net income and to project final pension if near retirement)
  * Current TSP balance (with breakdown if applicable into Traditional vs Roth)
  * Ongoing TSP contribution rate and amount (for pre-retirement growth until retirement date)
  * Estimated Social Security benefit at various claiming ages (from SSA statements, e.g. at 62, at Full Retirement Age, at 70)
  * FEHB health insurance premium (the current cost paid by the employee) and plan details (to account for post-retirement premium costs)

* **Scenario-Specific Inputs:**
  Each scenario will override certain profile data to reflect different retirement strategies. For example:

  * **Retirement date for each person** (or retirement age). This determines when the salary income ends and pension begins for that scenario.
  * **Social Security start age/date for each** (e.g. start at 62 vs 67 vs 70).
  * **TSP withdrawal strategy** after retirement (e.g. annual withdrawal rate like the “4% rule”, fixed monthly amount, annuitize, etc.). This could be a simple percentage or a schedule of withdrawals.
  * **COLA and inflation assumptions** for the scenario (expected annual inflation %, pension COLA %, etc.). The user should be able to adjust assumptions for general inflation, TSP investment return rates, and COLA to run optimistic or pessimistic cases.
  * **Investment return assumptions:** Pre- and post-retirement average return on TSP investments (for growth and Monte Carlo). For instance, one might assume a certain annual yield on TSP during retirement (e.g. 3% real or \~X% nominal). *OPM’s ballpark estimator uses defaults like \~4.95% before retirement and 3.0% after retirement for conservative planning.*
  * **Duration of simulation** (default 25 years, but user can set a different horizon, e.g. 30 years).

By allowing **multiple scenarios** in one input file (e.g. an array of scenarios), Robert can compare outcomes side by side. One scenario might have both retiring in 2025 with Social Security at 62, while another has working longer (later retirement dates) or delaying Social Security to 67, etc. Each scenario will produce a separate set of outputs (cash flow timeline and summary metrics), which the tool will compare against each other and against the **current baseline**.

## FERS Pension (Basic Annuity) Calculation

The model must compute the **FERS pension** for each person based on their service and salary. The FERS basic annuity is calculated by a formula:

**`Annual Pension = High-3 Salary average × Years of Service × Multiplier`**.

* The **multiplier** is typically 1% of high-3 average salary per year of service, or **1.1%** if the employee retires at age 62 or later with at least 20 years of service. For example, retiring at 62+ with ≥20 years gives a 10% higher pension (the 1.1% factor). The tool should apply the correct multiplier based on each person’s scenario retirement age.
* **Years of Service:** Use total federal service years (including any converted sick leave credit, if applicable). If provided with hire date and retirement date, the tool can compute length of service. Otherwise, the user can input total years of creditable service directly. (Ensure to account for any known **early retirement penalties**: retiring before age 60 with <20 years service or at the Minimum Retirement Age with <30 years can incur a 5% per year reduction under MRA+10 rules. However, Robert and Dawn likely plan immediate full retirement benefits, so this may not apply if they meet standard age/service thresholds. Still, the model could incorporate the 5%/year reduction if a scenario triggers it.)
* **High-3 Salary:** The average of the highest 36 consecutive months of base pay. In many cases this is the last three years of service for a steady career. The user can supply the high-3 value (or the tool can estimate it from current salary if they are near their highest pay). For accuracy, taking it from actual data (e.g. from their pay stubs or SF-50) is best.

**Survivor Benefit Election:** The user indicated **“zero survivor benefit”** for both. That means **no reduction** to either pension for survivor annuity. (If a survivor benefit were elected, typically 5–10% of the pension is withheld to provide a 25–50% survivor annuity – but since they chose none, the model will use the full pension amount for each retiree and assume it ceases at that person’s death. We will not complicate scenarios with survivor benefits since they opted out.)

**FERS COLA Adjustments:** The model must include cost-of-living adjustments on the pension **after retirement**, but note the special rule: **FERS retirees do not receive COLA on their pension until age 62** (unless they are a disability retiree or other special case). Once COLAs apply, FERS COLAs are typically slightly reduced relative to actual inflation if inflation exceeds 2%. Specifically, the FERS COLA formula is: if CPI increase ≤ 2%, COLA = CPI; if 2% < CPI ≤ 3%, COLA = 2%; if CPI > 3%, COLA = CPI – 1%. For example, if inflation is 5%, a FERS pension might get a 4% raise that year. The tool should allow setting an assumed COLA percent (e.g. 2% yearly) for simplicity, but for more accuracy it could implement the above rule if future inflation is specified. In any case, remember to **withhold COLA until age 62** for any portion of the projection where a retiree is under 62 (their pension stays flat in nominal dollars for those initial years). After 62, apply the COLA annually to the pension amount. The user should be able to adjust COLA assumptions, or even input a custom COLA series (e.g. using historical COLA rates for scenario testing).

**Special Retirement Supplement (FERS Supplement):** Because both Robert and Dawn are FERS employees, if either retires **before age 62**, they may be eligible for the FERS Supplement (also called the Special Retirement Supplement or SRS). This is an additional temporary payment **paid until age 62** to approximate the Social Security benefit earned from FERS service. The tool should account for this if applicable: basically, if a scenario has someone retiring before 62 and meeting the eligibility (the supplement is generally available for those who retire under standard immediate retirement rules before 62, with at least 30 years at MRA or 20 years at age 60, etc.). The amount of the supplement can be estimated as the portion of Social Security benefit attributable to their federal service. A simpler approach is to have the user input an estimated SRS amount (the question suggests the user can supply “SS estimated benefits,” which might include the supplement). For modeling purposes, if needed: the supplement is roughly calculated as Social Security at 62 \* (years of FERS service / 40). It stops at 62 **regardless** of whether they claim Social Security then. Also note the SRS is subject to an earnings test (like Social Security) if the retiree works elsewhere; likely not needed here if they fully retire. The model can include an input for “Pre-62 Supplement” for each person which kicks in after retirement and ends at 62. If Robert and Dawn provide their own estimate of this, use that; otherwise, implement the formula for an approximate value.

**Federal Employee Health Benefits (FEHB):** A critical consideration for net income is their health insurance. Robert will **keep their FEHB plan into retirement** for both of them. This means:

* **While working:** FEHB premiums are deducted from pay **pre-tax** (via “premium conversion” for federal employees).
* **In retirement:** They continue to pay the enrollee share of the premium, with the government still covering \~72-75% of the total premium cost. (FEHB for retirees is the same cost as for active employees – importantly, the government **continues paying the majority of the premium**, so their out-of-pocket premium remains roughly what it was, just without the pre-tax advantage.) However, **retiree FEHB premiums are paid with after-tax dollars** (no longer pre-tax). The model should thus treat the FEHB premium as an expense deducted from their annuity (or paid directly) **after** calculating taxes in retirement. This contrasts with the working years, where the premium reduces taxable income. We will include FEHB costs in both current and future calculations to ensure an apples-to-apples net income comparison. The user can input the current annual FEHB premium they pay; assume that premium grows with healthcare inflation (the user might fold this into the general inflation assumption or specify a separate rate if desired).

*(Note: Medicare – At age 65, they may choose to take Medicare Part B in addition to FEHB. The user didn’t explicitly discuss Part B, but if they do, that would be an extra premium cost \~\$*\* per month each at current rates. The model could allow a toggle for “add Part B at 65” as a nice-to-have, but since they plan to keep FEHB, some federal retirees forego Part B. We will keep this in mind as a potential future enhancement, but it’s not mandatory if the focus is on present and near-term retirement.)\*

## Thrift Savings Plan (TSP) Projections

**TSP Growth Before Retirement:** Until their retirement dates, Robert and Dawn will continue contributing to the TSP. The model should simulate the growth of each person’s TSP balance from now until their retirement in each scenario:

* Start with the current TSP balance (user input from their statements).
* Each year (or each pay period, but annual is fine for planning) until retirement, add contributions and investment earnings. Contributions can be taken from their LES or set as a percentage of salary (including any agency matching, though as federal employees they likely already max the match of 5%). Use their current contribution rates or dollar amounts (from input).
* Investment returns: apply an assumed annual rate of return to the TSP balance. The user can specify this assumption. They might use historical averages of their chosen fund mix. For reference, **historical TSP fund returns** have been approximately: C Fund (S\&P 500) \~12.3% avg (1988–2020), F Fund \~6.3%, G Fund \~4.7%. The user’s portfolio may be a mix, or they might choose a conservative planning number (e.g. 5-6% before retirement). The model can default to something reasonable (for example, OPM’s guidance uses \~4.95% before retirement), but allow customization.

**TSP Withdrawals in Retirement:** After retirement, the TSP (and any other savings) becomes a key income source. The tool should support various withdrawal strategies, with initial focus on a **“4% rule”** style withdrawal as requested (i.e. withdraw \~4% of the portfolio in the first year of retirement, then adjust annually for inflation). Specific capabilities:

* Allow the user to specify a **fixed percentage** withdrawal rate or a fixed dollar amount. E.g. “4% of initial balance” or “\$X per year”. The 4% rule typically means if you have \$Y in TSP at retirement, you take 4% of Y in the first year, then increase that withdrawal by inflation each year to maintain purchasing power. The model should implement that if chosen. Alternatively, the user might input an explicit plan (like “withdraw \$2,000/month for living expenses” or “withdraw just Required Minimum Distribution (RMD) amounts”).

* If the user doesn’t specify, a safe default is to use the 4% rule on combined TSP assets and apply inflation. The model should track the remaining TSP balance each year as withdrawals are taken and investment growth continues on the remaining balance. This way, we can see if the TSP lasts through the 25-year horizon or beyond.

* **Monte Carlo simulation (optional advanced feature):** Using historical return data, the model could run simulations to account for market volatility. For example, randomly simulate 25-year return sequences (based on TSP fund history or a statistical distribution) to estimate the probability that the TSP might be depleted under a given withdrawal rate. This would provide insight into the sustainability of their withdrawal strategy (e.g. how safe the 4% rule is for them). Historical data from TSP funds (C, S, F, G, etc.) or stock/bond indexes can be used as the basis for these simulations. Monte Carlo would be a **“nice-to-have”** addition for deeper analysis of long-term risk. Initially, we can implement deterministic scenarios and perhaps a single “high/low returns” variant for sensitivity, then add full Monte Carlo if time permits.

* **RMD considerations:** Since the model looks 25+ years out, note that TSP (traditional) is subject to IRS required minimum distributions currently starting at age 73 (for Robert and Dawn, who likely will hit 73 within the horizon). If they are withdrawing via the 4% rule, they may already be exceeding RMDs initially, but at older ages the RMD percentage will increase. The tool should at least flag if a planned withdrawal is less than the RMD at any age and adjust to meet RMD minimum if needed. (This is another advanced detail; it can be simplified by assuming their 4%+inflation withdrawal will generally satisfy RMD until perhaps very late ages when balances might still be high.)

* **Tax treatment of TSP:** If their TSP is traditional (pre-tax), withdrawals will be taxed as ordinary income. If any portion is Roth TSP, those withdrawals are tax-free (but then we should track the portion of the balance that is Roth vs traditional). The input can allow specifying what fraction or amount of the TSP is Roth. For now, assume most is Traditional, unless they specify otherwise. The model will include TSP withdrawals in taxable income for tax calculations (federal, and note: Pennsylvania **does not tax retirement plan withdrawals** if taken at or after retirement age, see Taxes section below).

## Social Security Benefits Modeling

Social Security will be a significant income stream, and the timing of claiming benefits is a major decision. The tool needs to incorporate Social Security for both Robert and Dawn with flexibility in start dates per scenario:

* **Benefit Estimates:** The user will supply estimated monthly benefits for each of them at certain ages (likely from their SSA statements). For example, they might provide: “Robert’s SSA benefit at 62 is \$A, at 67 (FRA) is \$B, at 70 is \$C; Dawn’s at 62 is \$D, at FRA is \$E, etc.” Using these, the model can interpolate or pick the appropriate amount based on the chosen starting age in the scenario. It’s important because calculating the benefit from scratch requires detailed earnings history – instead we rely on the SSA estimates the user has. If the scenario’s start age isn’t exactly one of those, approximate the reduction or increase. (Starting earlier than FRA reduces the benefit \~6-7% per year, and delaying past FRA increases it by **8% per year up to age 70**.) The user likely will pick standard ages like 62, 67, or 70, which correspond to known values.

* **Spousal considerations:** Both are eligible on their own work records, so each will just take their own benefit. (No need to model spousal or survivor Social Security benefits given their situation.) We just need to start each person’s benefit at the chosen time. If one scenario has different start ages, the model should handle one spouse starting SS while the other delays, etc.

* **COLA for Social Security:** Social Security benefits receive annual COLAs based on inflation (CPI-W). The model should apply an annual increase to SS payments once started. Historically, SS COLAs have averaged around 2-3% but vary (e.g. 2023 was >8%). We can use the same COLA assumption as for inflation or let the user specify a separate SS COLA rate. (Often it will match general inflation in the scenario.) This ensures the SS income stream grows over time in nominal terms.

* **Taxation of Social Security:** At the **federal** level, Social Security can be partially taxable depending on total income. The model must implement the IRS rules for SS taxation: Specifically, calculate “provisional income” = AGI (excluding SS) + 50% of SS + tax-exempt interest. For a married couple, if provisional income > \$32,000, up to 50% of SS becomes taxable; if > \$44,000, up to 85% of SS is taxable. We should incorporate this calculation for federal taxes each year in the retirement scenarios, since they will have other income (pensions, TSP withdrawals) that likely push them into the range where 85% of SS is taxed. The model doesn’t need to get the **exact** taxable amount with extreme precision for every year, but it should apply the formula so that the federal tax on SS is accounted for.

* **State and Local tax:** Note that **Pennsylvania does NOT tax Social Security benefits**, and local earned income tax also does not apply to Social Security (as it’s not earned income). So SS is effectively tax-free at PA state and local levels, which will help their net income.

By including Social Security in the model, Robert and Dawn can experiment with, for example, one scenario where they both claim at 62 (smaller benefit, longer period) versus another where they delay to e.g. 67 or one does 62 and the other 67, etc., to see how that impacts their cash flow and taxes.

## Tax Calculations (Federal, State, Local)

Accurate tax modeling is crucial for an apples-to-apples comparison of **net income** now vs. after retirement. The tool needs to handle: **federal income tax**, **Pennsylvania state income tax**, and **local (Upper Makefield Township) tax**, plus payroll taxes (FICA) where applicable. We will calculate taxes on an **annual basis** (monthly could be derived, but annual ensures bracket calculations). Key points:

* **Federal Income Tax:** Use the progressive tax brackets for the appropriate year. Since we are focusing on near-term retirement, we can start with 2025 tax rates (the latest known) and assume the same brackets adjusted for inflation going forward (or keep them constant for simplicity, acknowledging potential law changes in 2026 when tax cuts expire – perhaps allow a toggle for tax law changes as a future feature). For 2025, the married filing jointly brackets are: 10% on taxable income up to \$23,850; 12% up to \$96,950; 22% up to \$206,700; 24% up to \$394,600; 32% up to \$501,050; 35% up to \$751,600; 37% beyond that. The model should incorporate these marginal rates and the **standard deduction** (which in 2025 is \$30,000 for married filing jointly, plus an extra \$1,600 each if age 65+ – down the line they will get that senior deduction, but initially they are younger). We will calculate each scenario’s taxable income = (pensions + TSP withdrawals + taxable portion of SS + any other taxable income) minus deductions. Likely they will take standard deduction, but if they have large deductions (e.g. state taxes and property taxes, though SALT limit etc.), standard is usually better. We can assume standard deduction for simplicity. **Ensure** to handle the taxation of SS as above (no more than 85% of SS can be taxed). The output should include federal tax paid each year and net-of-federal-tax income.

* **Pennsylvania State Tax:** Pennsylvania has a **flat 3.07% income tax** on earned income and a few other categories. Crucially, **Pennsylvania exempts retirement income:** *“no state tax on Social Security, pensions or income from retirement plans”*. For retirees above 59½ taking distributions, 401k/TSP and IRA withdrawals are not taxed by PA, and pension annuities are not taxed either (for those who retire at the eligible age). Therefore, in the **retirement scenarios**, **PA state tax will effectively be zero** on their pension, TSP, and SS income (assuming they retire after reaching proper retirement age, which they are). The only state-taxable income might be any part-time wages or interest, but the problem doesn’t indicate any. So we will apply 0% PA tax on their retirement incomes (this is a significant benefit of retiring in PA). While working currently, however, their **salaries are subject to PA 3.07%**. So in the current scenario (baseline), we should deduct \~3.07% of their gross wages for state tax (minus any pre-tax deductions like TSP contributions which also reduce PA taxable income). The tool can simply calculate PA tax = 3.07% × (taxable wages) for the working year. In scenarios where one of them continues working for a while (if any scenario staggers retirement), that person’s wage in those years would still incur PA tax. But once fully retired, PA tax drops off. We will incorporate this rule accordingly.

* **Local Income Tax (Upper Makefield Township, Bucks County):** Most Pennsylvania municipalities levy a local **Earned Income Tax (EIT)** on wages for residents. Upper Makefield’s EIT is **1% on earned income**, with revenue split between the township and the school district. As of 2025, Upper Makefield Township itself takes 0.5% and the school district (Council Rock) 0.5%, totaling 1% for residents. This tax applies only to **earned income** (wages, salaries, bonuses, net self-employment profits) and not to pensions, retirement distributions, or Social Security. So:

  * **Currently (while working):** Robert and Dawn each pay 1% of their gross wages to local EIT. The model should deduct this in the current net income calculation. (Local tax is usually calculated on the gross after certain allowable pre-tax deductions; we should verify if TSP contributions are exempt from local EIT – likely *not*, because local taxable “earned income” in PA typically follows PA state taxable compensation rules, which *do* tax 401k contributions. For simplicity, assume the 1% is on total wages.)
  * **After retirement:** With no earned income (their pension, TSP withdrawals, SS are not “earned” for this purpose), **local EIT = \$0**. So another source of tax goes away when they retire. This will improve their net post-retirement position relative to gross. The model will reflect zero local tax in retirement years.
  * If a scenario involves one spouse still working while the other is retired (perhaps one retires earlier), then for that period, the working spouse still pays the 1% EIT on their wages until they stop working.

* **Payroll Taxes (FICA):** While they are salaried, they pay Social Security (6.2% up to the wage base) and Medicare (1.45% on all wages) taxes. In the baseline current net income, we should account for these **FICA taxes** being withheld. Once they retire and draw pension/TSP/SS, they **no longer pay Social Security or Medicare taxes** on those incomes (pensions and withdrawals are not subject to FICA). This represents another difference: their gross income will drop in retirement, but also they won’t have 7.65% taken out for FICA. We should include FICA in the working year calculation for completeness of net pay. (Since both work for the Navy, presumably each pays FICA on their salary as normal FERS employees.)

* **Current Deductions Recap:** To compute **current net pay** (the baseline for comparison), for each of Robert and Dawn we will take their gross salary and subtract: TSP contributions, FEHB premium, FERS pension contribution, federal tax, PA tax, local tax, and FICA. The result (summed for both) is their combined net take-home. We have to be careful with the order: TSP and FEHB are pre-tax for federal and state (and FEHB also pre-tax for SS/Medicare). FERS pension contributions (typically \~0.8%-4.4% of pay depending on their hire dates) are also pre-tax for federal? Actually FERS contributions are after-tax for federal income tax (no, FERS contributions are after-tax for federal tax; only TSP and FEHB are pre-tax). But FERS contributions are mandatory and reduce net pay. We might simplify by including FERS contribution as just part of their spending (small effect). But since “all taken into account” was specified, we should subtract that too in current net. (However, once retired, they stop paying that.)

  * Example: If Robert’s salary is \$100k, he might contribute 5% to TSP (\$5k) and pay maybe \$1.3k FEHB, and \~4.4% (\$4.4k) FERS contribution (if under FERS-FRAE). So taxable income to IRS might be \~\$100k - \$5k - \$1.3k = \$93.7k (FERS contrib doesn’t reduce federal taxable). Then federal tax on that, plus 6.2% SS on \$100k, etc. The model can do this precisely with their actual numbers from the LES or W-2.
  * We expect the user to input salary and contribution rates; thus the model can compute all these with known tax rates. This yields their **current annual net**.

* **Net Retirement Income Calculation:** For each future year in a scenario, calculate total income (pensions + TSP withdrawals + SS for both, as applicable in that year). Then apply:

  * Federal tax on that year’s taxable income (after standard deduction, considering only 85% of SS max taxable, etc.).
  * PA state tax (likely zero if only retirement income, as explained).
  * Local tax (zero if no wages).
  * Subtract FEHB premiums (after tax in retirement).
  * The remainder is the **net spendable income** for that year.

The model will produce a **year-by-year ledger** for each scenario, showing each income source, each tax and deduction, and resulting net income. This enables verifying accuracy and identifying which scenario yields higher net income at various points in time.

## Inflation and COLA Settings

To compare “apples to apples,” it’s important to understand if we are comparing **real purchasing power** or just nominal dollars. The output should ideally clarify this. Some approaches:

* We could output all future values in **today’s dollars** (i.e. subtract inflation) to make it easy to compare to current income. However, it might be clearer to output nominal dollars year by year (since taxes are calculated in nominal terms) but then also show a column in real dollars. Possibly give the user the option. Initially, we might keep it nominal but emphasize the assumptions.

* The model should allow a **global inflation rate** assumption (e.g. 2% or 3% annually) to project increases in cost-of-living. This inflation will affect: the COLAs on pension and SS (if not specified separately), increases in the TSP withdrawals if using the 4% rule (since you’d increase withdrawals by inflation each year), and can be used to inflate tax brackets if we assume they adjust (the IRS does adjust brackets for inflation each year). If we keep tax brackets constant for simplicity, we might slightly overestimate future taxes (because in reality brackets would rise with inflation). A refinement could be to increase bracket thresholds by the inflation rate each year in the simulation.

* **Historical data provision:** We should incorporate or at least allow loading historical inflation rates, COLAs, and returns. For example, the user might want to run a scenario using the *actual inflation and TSP returns from 2000–2025* to see how their plan would have fared in those conditions. Providing a library of historical data for COLAs (Social Security COLA history is public) and TSP fund performance could be very useful. This data can be used both for deterministic “historical replay” scenarios and for Monte Carlo (random re-sampling or statistically derived scenarios). As an example, **Social Security COLAs** from 2000-2023 have ranged from 0% to \~8.7%, and **CPI-U inflation** similarly. **TSP Funds** like the C Fund have very volatile year-to-year returns (e.g. +28% one year, -18% another), whereas G Fund is steady \~4% historically. The model can store these as arrays or in a file, and the user could select to use “historic average” vs “random draw from history” etc. This level of detail is more of a *nice-to-have for Monte Carlo* rather than required for the base functionality. Initially, we ensure the user can set fixed rates (inflation = X%, COLA = Y%, TSP return = Z%) to see the outcomes.

## Output and Visualization of Scenarios

To make the results **understandable and actionable**, the tool should present the comparison in a clear manner. Some recommended output features:

* **Year-by-Year Table:** For each scenario (and for the current baseline), produce a table of values for each year, at least for the first, say, 5-10 years in detail and up to 25+ years summary. Each year’s row might include:

  * Age of Robert and Dawn in that year (to spot when 62, 65, etc. happen)
  * Each income component: Robert’s pension, Dawn’s pension, Robert’s SS, Dawn’s SS, TSP withdrawal (combined or each), any FERS supplement (for years before 62 if applicable).
  * Total gross income for the household that year.
  * Taxes: federal tax, state tax, local tax separately.
  * Net income after taxes.
  * Major expenses deducted: FEHB premiums (and potentially Medicare B if we ever include it).
  * **Final net spendable** for that year.

This table allows an apples-to-apples check: e.g. in the first year of retirement scenario 1, net income = \$X, vs current net income = \$Y. If \$X is significantly lower, they know the shortfall; if it’s close to \$Y, then their immediate lifestyle change may be minimal.

* **Comparison Summary:** The tool should highlight **key metrics** for each scenario:

  * **First-year net income vs current:** e.g. “In Scenario A (retire 2025), your first year of retirement net income is \$N, which is 90% of your current net income \$M – meaning a slight drop.” Scenario B might show a different number. This directly addresses the “immediate aftermath” concern.
  * **Crossover or long-term trend:** Perhaps by year 5 or 10, how do the scenarios compare? (For instance, a scenario with delayed SS might have lower income early on, but higher later once larger SS kicks in, possibly overtaking the other scenario at some point.) We can identify if and when one scenario’s income surpasses the other, etc.
  * **25-year outlook:** total cumulative net income over 25 years for each scenario (though not as important as cash flow, it gives an idea of lifetime benefits). Also, projected TSP balance remaining after 25 years for each scenario (to see if one plan leaves more legacy or runs out of money).

* **Visualizations:** A graph can greatly aid understanding. For example, a line chart of **annual net income vs year** for each scenario and for current net income as a reference line. This would show the trajectory of their income. If one scenario has a sharp drop at retirement and then grows with COLA, you’ll see that. If another has a more gradual change, it’ll be visible. Another useful chart could be a **stacked bar chart** of income sources per year – illustrating how the mix of pension, TSP, SS changes over time. For instance, at retirement age, pension might be the only source initially (plus supplement), then Social Security kicks in a few years later adding another layer, while TSP withdrawals fill any gaps. This helps ensure they see how reliance shifts from TSP early to SS later, etc.

  Since the user suggested possibly a CLI (command-line interface) to start, the simplest route is to output the data and perhaps save it as a CSV or JSON, which they could load into Excel or another tool to graph. However, we can also consider generating an **HTML report** with charts. For example, using Go templates or simple JS libraries (like Chart.js or Google Charts) to produce an HTML file that shows tables and charts. This static HTML approach might be nearly as easy as CLI output and would greatly enhance readability. We recommend starting with text/CSV output for correctness, then adding a static HTML report generator once the calculations are verified. This provides both quick iteration and a nice presentation.

* **User Adjustments & Re-running:** The model should be easy to rerun with different inputs. Because it’s not an interactive app (at least initially), we emphasize clarity of the input file – making it easy to tweak dates or rates and rerun. Including comments or documentation in the input format will help the user make changes.

* **Unit Tests & Verification:** Since the user is comfortable with Go unit testing, we should include tests for each calculation component: tax calculations (e.g. verify that our tax function matches known IRS outputs for given incomes), pension formula (test known scenarios like 30 years at \$100k high-3 gives \$30k or \$33k depending on age), Social Security taxation thresholds (test that our provisional income logic correctly taxes 85% when appropriate), etc. We can also cross-verify the entire model against a simpler scenario or an existing calculator’s output for consistency. This will build confidence in the accuracy before relying on the results.

## Other Considerations and Nice-to-Have Features

Beyond the core functionality, here are additional features and best practices for a comprehensive solution:

* **Longevity and “What-if” Analysis:** The base 25-year projection likely takes them into their 80s. We could allow extending beyond that, or at least ensure the model can indicate one or both reaching an age (like 90) if 25 years isn’t enough. This could tie into Monte Carlo (simulate longevity risk as well). Also, incorporate an option to see the impact if one spouse dies at a certain year (since they chose no survivor pension, if, say, one dies at year 15, their pension stops – the surviving spouse would then only have their own income sources). This is a more advanced “what-if” but relevant given no survivor benefit: each scenario could have a sensitivity check for the loss of one income. It’s probably a secondary consideration, but worth noting for completeness.

* **Existing Tools & Inspiration:** It’s useful to compare our planned features with existing retirement calculators for federal employees:

  * OPM’s **Federal Ballpark Estimate** – a simple tool that asks for savings, pension, etc., to estimate if you’re on track. It’s not very detailed in taxes, so our tool will surpass it in specificity. But OPM’s site did provide valuable assumptions (like TSP returns and safe rates).
  * **Hughcalc FERS calculator** (Hugh Chou’s) – this online tool specifically takes inputs for pension, Social Security (including the FERS supplement) and TSP, much like our plan. It doesn’t output taxes but does project income needs. We have essentially identified similar inputs (birthdays, pension COLA, balances, yields, SS start ages, etc.) from its interface. That reassures us that our input set is on target for a holistic planner.
  * **Commercial retirement planners** (e.g. FireCalc, cFIREsim, NewRetirement, etc.) – these can do Monte Carlo and tax to some extent, but they aren’t tailored to FERS specifics (e.g. FERS supplement, federal pension rules). Our custom tool is advantageous because it accounts for FERS nuances like the COLA cap and PA state tax exemptions.
  * **Financial advisory calculators for federal employees** – some websites (like PlanWise or FedAdvantage) offer calculators that include FERS, FEHB, survivor benefits, etc.. For example, PlanWell’s description mentions calculating “FERS pension, survivor benefits, FERS supplement, FEGLI, FEHB, Medicare, Social Security, and TSP strategies”. Our model covers all those except life insurance (FEGLI) and we lightly touched on Medicare. If needed, adding FEGLI (life insurance premium vs benefit) could be another aspect of planning (they might drop or reduce life insurance in retirement, affecting expenses). But since it wasn’t explicitly mentioned by the user, we can leave that out unless they bring it up.

* **Outputs/Visualization – final thoughts:** We should ensure the output clearly highlights **differences** between scenarios. Perhaps a summary like: “**Scenario 1 vs Scenario 2 Comparison:** In the first 5 years of retirement, Scenario 1 yields \$X more cumulative net income than Scenario 2, but by year 15 Scenario 2 catches up due to higher Social Security. Meanwhile, your current combined net income is \$Y per year; Scenario 1 would give you \$Z per year initially, which is (Z/Y\*100)% of your current take-home.” This kind of summary in plain language will help Robert and Dawn immediately grasp the trade-offs. Visual aids like charts or even textual bars could supplement this (e.g. a line “Current Net: ######## ( \$90k); Scenario1 Net: ####### ( \$80k); Scenario2 Net: ######### ( \$95k)” to give a quick visual scale).

* **Ease of Use:** Since it’s a personal tool, we can tailor it for their situation specifically (e.g. always assume married filing jointly, always PA taxes, etc.). But if we design it generally enough, it could potentially be reused by others or adapted. Using clear code structure (maybe separate modules for pension calc, tax calc, etc.) and thorough comments will make it maintainable. We should also allow enabling/disabling certain complexities (like turning off Monte Carlo or detailed tax if not needed every run) to keep things speedy when desired.

* **Testing with Real Data:** Once built, we will take Robert and Dawn’s actual input data (from their LES, TSP statements, Social Security estimates) and run the model. We should verify the “current” calculation matches their actual net pay (as a validation). Any discrepancies might mean we need to adjust how we handle pre-tax deductions, etc. Then, we can produce scenario outputs that they can review. It might be useful to involve them in verifying assumptions (like confirming that PA indeed won’t tax their TSP withdrawals – which our research shows it won’t).

By implementing all the above features, the resulting tool will capture **all major factors** affecting their retirement income: federal pension specifics, Social Security timing, TSP growth and drawdown, **all relevant taxes**, and ongoing costs like health insurance. The output will directly compare current vs future **net cash flow**, shining a light on how their take-home income changes the moment they retire and in the years thereafter. This comprehensive approach will empower Robert and Dawn to evaluate different retirement dates and strategies side by side with confidence.

## Conclusion and Next Steps

In summary, the retirement planning code needs to integrate multiple domains – federal benefits formulas, tax law, and financial modeling – to give an accurate picture. We have identified the necessary **inputs (personal data and scenario parameters)** and the key **functions/calculations** (pension calculation, TSP simulation, Social Security timing, detailed tax computation, COLA/inflation adjustments). We also outlined how to present the results in a clear, comparative format with potential visual aids.

The next step is to translate this research into implementation: setting up data structures for input, writing functions for each piece (e.g. `calculatePension()`, `calculateTaxes()`), and assembling the scenario projections year by year. We should incorporate the real data and perhaps run a test scenario through an existing calculator (if possible) to cross-check. Once the core logic is done and tested, we can focus on the output formatting (CLI text vs HTML). A CLI text output with neatly formatted tables may suffice initially; later an HTML report with charts can be added for ease of understanding.

By following this plan and verifying each component against known reference points (IRS rules, OPM rules, etc.), we will create a robust tool that provides **Robert and Dawn with the insight they need**. They will be able to see exactly how their net monthly income in retirement stacks up against their current pay, and how that evolves over time, under different decisions. This will greatly aid their choice of retirement dates, TSP withdrawal approach, and Social Security claiming strategy, giving them confidence in their retirement planning.

**Sources:**

* Official FERS annuity formula and retirement benefits explanation
* Thrift Savings Plan historical returns and default assumptions
* IRS Tax Brackets for 2025 (Married Filing Jointly)
* Pennsylvania taxation of retirement income (exemptions for pensions, 401k, SS)
* Upper Makefield PA local earned income tax information
* Social Security COLA and taxation details
* FERS COLA rules (deferred until 62, formula if >2% inflation)
* FEHB in retirement (government continues paying \~75% of premium)
* Social Security delayed retirement credits (\~8%/year delay)
